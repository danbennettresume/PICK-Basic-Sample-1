:SSELECT CMS.CARD WITH EXP1.UNFORMATTED = "31 JAN 2016"
>SAVE.LIST DANB.USER.UPDATE.FORMAT.ISSUE
:DANB.CORRECT.JAN.2016.FORMAT.ISSUE

DANB.CORRECT.JAN.2016.FORMAT.ISSUE
$UDI I_COMMON
* DANB 20150812     Q&D TO UPDATE A SPECIFIC ISSUE
*                   Assumes only only one Exp Date is updated
*
OPEN '', 'CMS.CARD' TO CMS.CARD ELSE STOP "CMS.CARD"
REC.CT = 0
DONE = 0
*
* Really not sure if memory is correct about the return code.
*  For something basic I would let me error checking confirm.
EXECUTE "GET-LIST DANB.USER.UPDATE.FORMAT.ISSUE" CAPTURING JUNK
IF @SYSTEM.RETURN.CODE > 0 THEN DONE = 1
*
LOOP
  READNEXT PAN ELSE DONE = 1
UNTIL DONE DO
  READ CMSIO FROM CMS.CARD, PAN ELSE CMSIO = ""
  EXPIN = CMSIO<16>
  EXPOUT = ICONV(EXPIN, 'D2')
  CMSIO<16> = EXPOUT
  WRITE CMSIO ON CMS.CARD, PAN
*
REC.CT += 1
IF MOD(REC.CT, 1000) ELSE PRINT "PROCESSING " : REC.CT : " " : PAN
REPEAT
PRINT "PROCESSING " : REC.CT
STOP

